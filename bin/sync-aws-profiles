#!/usr/bin/env bash
# vim: set filetype=bash tabstop=2 shiftwidth=2 expandtab :

print_step() {
  echo -e "\n\033[1;34m==> $1\033[0m"
}

print_success() {
  echo -e "\033[1;32m✔ $1\033[0m"
}

print_error() {
  echo -e "\033[1;31m✖ $1\033[0m"
}

PROFILES=(
  1000bulbs-management
  1000bulbs-audit
  1000bulbs-disaster-recovery
  1000bulbs-integration
  1000bulbs-logging
  1000bulbs-production
  1000bulbs-qa
  1000bulbs-sandbox
  1000bulbs-shared-services
  1000bulbs-staging
)

for PROFILE in "${PROFILES[@]}"; do
  print_step "Logging in to AWS SSO for profile: $PROFILE"
  aws sso login --profile "$PROFILE"
  if [[ $? -eq 0 ]]; then
    print_success "Logged in for $PROFILE"
  else
    print_error "Failed to log in for $PROFILE"
  fi
done

print_success "All AWS SSO profiles refreshed."
